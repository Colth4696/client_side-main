{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _lodash = require('lodash.debounce');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _defaults = require('./defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nvar _propTypes = require('./prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _filterInputAttributes = require('./filter-input-attributes');\n\nvar _filterInputAttributes2 = _interopRequireDefault(_filterInputAttributes);\n\nvar _input = require('./input');\n\nvar _input2 = _interopRequireDefault(_input);\n\nvar _suggestList = require('./suggest-list');\n\nvar _suggestList2 = _interopRequireDefault(_suggestList);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/* global window */\n// Escapes special characters in user input for regex\n\n\nfunction escapeRegExp(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\n/**\n * Entry point for the Geolookup component\n */\n\n\nvar Geolookup = function (_React$Component) {\n  _inherits(Geolookup, _React$Component);\n  /**\n   * The constructor. Sets the initial state.\n   * @param  {Object} props The properties object.\n   */\n\n\n  function Geolookup(props) {\n    _classCallCheck(this, Geolookup);\n\n    var _this = _possibleConstructorReturn(this, (Geolookup.__proto__ || Object.getPrototypeOf(Geolookup)).call(this, props));\n\n    _this.onInputChange = function (userInput) {\n      _this.setState({\n        userInput: userInput\n      }, _this.onAfterInputChange);\n    };\n\n    _this.onAfterInputChange = function () {\n      if (!_this.state.isSuggestsHidden && !_this.disableAutoLookup) {\n        _this.showSuggests();\n      }\n\n      _this.props.onChange(_this.state.userInput);\n    };\n\n    _this.onInputFocus = function () {\n      _this.props.onFocus();\n\n      if (!_this.disableAutoLookup) {\n        _this.showSuggests();\n      }\n    };\n\n    _this.onInputBlur = function () {\n      if (!_this.state.ignoreBlur && !_this.disableAutoLookup) {\n        _this.hideSuggests();\n      }\n    };\n\n    _this.onButtonClick = function () {\n      if (_this.state.isSuggestsHidden && _this.disableAutoLookup) {\n        _this.showSuggests();\n      } else {\n        _this.hideSuggests();\n      }\n    };\n\n    _this.onNext = function () {\n      return _this.activateSuggest('next');\n    };\n\n    _this.onPrev = function () {\n      return _this.activateSuggest('prev');\n    };\n\n    _this.onSelect = function () {\n      return _this.selectSuggest(_this.state.activeSuggest);\n    };\n\n    _this.onSuggestMouseDown = function () {\n      return _this.setState({\n        ignoreBlur: true\n      });\n    };\n\n    _this.onSuggestMouseOut = function () {\n      return _this.setState({\n        ignoreBlur: false\n      });\n    };\n\n    _this.onSuggestNoResults = function () {\n      _this.props.onSuggestNoResults(_this.state.userInput);\n    };\n\n    _this.hideSuggests = function () {\n      _this.props.onBlur(_this.state.userInput);\n\n      _this.timer = setTimeout(function () {\n        _this.setState({\n          isSuggestsHidden: true,\n          activeSuggest: null\n        });\n      }, 100);\n    };\n\n    _this.selectSuggest = function (suggest) {\n      if (!suggest) {\n        suggest = {\n          label: _this.state.userInput\n        };\n      }\n\n      _this.setState({\n        isSuggestsHidden: true,\n        userInput: suggest.label\n      });\n\n      if (suggest.location) {\n        _this.setState({\n          ignoreBlur: false\n        });\n\n        _this.props.onSuggestSelect(suggest);\n\n        return;\n      }\n\n      _this.geocodeSuggest(suggest);\n    };\n\n    _this.state = {\n      isSuggestsHidden: true,\n      isLoading: false,\n      userInput: props.initialValue,\n      activeSuggest: null,\n      suggests: []\n    };\n    _this.onInputChange = _this.onInputChange.bind(_this);\n    _this.onAfterInputChange = _this.onAfterInputChange.bind(_this);\n\n    if (props.queryDelay) {\n      _this.onAfterInputChange = (0, _lodash2.default)(_this.onAfterInputChange, props.queryDelay);\n    }\n\n    _this.geocodeProvider = props.geocodeProvider;\n    _this.disableAutoLookup = props.disableAutoLookup;\n    return _this;\n  }\n  /**\n   * Change inputValue if prop changes\n   * @param {Object} props The new props\n   */\n\n\n  _createClass(Geolookup, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(props) {\n      if (this.props.initialValue !== props.initialValue) {\n        this.setState({\n          userInput: props.initialValue\n        });\n      }\n    }\n    /**\n     * Called on the client side after component is mounted.\n     * Google api sdk object will be obtained and cached as a instance property.\n     * Necessary objects of google api will also be determined and saved.\n     */\n\n  }, {\n    key: 'componentWillMount',\n    value: function componentWillMount() {\n      if (typeof window === 'undefined') {\n        return;\n      } // if no geocodeProvider and no onGeocodeSugegst function is\n      // set, use google apis\n\n\n      if (!this.geocodeProvider && typeof this.props.onGeocodeSuggest() === 'undefined') {\n        // use google apis\n        var googleMaps = this.props.googleMaps || window.google && // eslint-disable-line no-extra-parens\n        window.google.maps || this.googleMaps;\n        this.googleMaps = googleMaps;\n        /* istanbul ignore next */\n\n        if (!googleMaps) {\n          return;\n        }\n\n        this.autocompleteService = new googleMaps.places.AutocompleteService();\n        this.geocoder = new googleMaps.Geocoder();\n      }\n    }\n    /**\n     * When the component will unmount\n     */\n\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      clearTimeout(this.timer);\n    }\n    /**\n     * When the input changed\n     * @param {String} userInput The input value of the user\n     */\n\n    /**\n     * On After the input got changed\n     */\n\n    /**\n     * When the input gets focused\n     */\n\n    /**\n     * When the input gets blurred\n     */\n\n    /**\n     * When the search button gets clicked\n     */\n\n  }, {\n    key: 'focus',\n\n    /**\n     * Focus the input\n     */\n    value: function focus() {\n      this.refs.input.focus();\n    }\n    /**\n     * Blur the input\n     */\n\n  }, {\n    key: 'blur',\n    value: function blur() {\n      this.refs.input.blur();\n    }\n    /**\n     * Update the value of the user input\n     * @param {String} userInput the new value of the user input\n     */\n\n  }, {\n    key: 'update',\n    value: function update(userInput) {\n      this.setState({\n        userInput: userInput\n      });\n      this.props.onChange(userInput);\n    }\n    /*\n     * Clear the input and close the suggestion pane\n     */\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.setState({\n        userInput: ''\n      }, this.hideSuggests);\n    }\n    /**\n     * Search for new suggests\n     */\n\n  }, {\n    key: 'searchSuggests',\n    value: function searchSuggests() {\n      var _this2 = this;\n\n      if (!this.state.userInput) {\n        this.updateSuggests();\n        return;\n      }\n\n      this.setState({\n        isLoading: true\n      }, function () {\n        if (typeof _this2.props.onSuggestsLookup() === 'undefined') {\n          if (_this2.props.geocodeProvider) {\n            // Use props defined geocodeProvider.lookup\n            _this2.props.geocodeProvider.lookup(_this2.state.userInput).then(function (suggestsResults) {\n              _this2.setState({\n                isLoading: false\n              });\n\n              _this2.updateSuggests(suggestsResults || [], // can be null\n              function () {\n                if (_this2.props.autoActivateFirstSuggest && !_this2.state.activeSuggest) {\n                  _this2.activateSuggest('next');\n                }\n              });\n            }).catch(function (error) {\n              console.error('geocodeProvider lookup Error: ', error);\n            });\n          } else {\n            // Use Google Places lookup\n            var options = {\n              input: _this2.state.userInput\n            };\n            ['location', 'radius', 'bounds', 'types'].forEach(function (option) {\n              if (_this2.props[option]) {\n                options[option] = _this2.props[option];\n              }\n            });\n\n            if (_this2.props.country) {\n              options.componentRestrictions = {\n                country: _this2.props.country\n              };\n            }\n\n            _this2.autocompleteService.getPlacePredictions(options, function (suggestsResults) {\n              _this2.setState({\n                isLoading: false\n              });\n\n              _this2.updateSuggests(suggestsResults || [], // can be null\n              function () {\n                if (_this2.props.autoActivateFirstSuggest && !_this2.state.activeSuggest) {\n                  _this2.activateSuggest('next');\n                }\n              });\n            });\n          }\n        } else {\n          // Use props defined onSuggestLookup\n          _this2.props.onSuggestsLookup(_this2.state.userInput).then(function (suggestsResults) {\n            _this2.setState({\n              isLoading: false\n            });\n\n            _this2.updateSuggests(suggestsResults || [], // can be null\n            function () {\n              if (_this2.props.autoActivateFirstSuggest && !_this2.state.activeSuggest) {\n                _this2.activateSuggest('next');\n              }\n            });\n          }).catch(function (error) {\n            console.error('onSuggestsLookup Search Error: ', error);\n          });\n        }\n      });\n    }\n    /**\n     * Update the suggests\n     * @param {Array} suggestsResults The new google suggests\n     * @param {Function} callback Called once the state has been updated\n     */\n\n  }, {\n    key: 'updateSuggests',\n    value: function updateSuggests() {\n      var _this3 = this;\n\n      var suggestsResults = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var callback = arguments[1];\n      var suggests = [],\n          regex = new RegExp(escapeRegExp(this.state.userInput), 'gim'),\n          skipSuggest = this.props.skipSuggest,\n          maxFixtures = 10,\n          fixturesSearched = 0,\n          activeSuggest = null;\n      this.props.fixtures.forEach(function (suggest) {\n        if (fixturesSearched >= maxFixtures) {\n          return;\n        }\n\n        if (!skipSuggest(suggest) && suggest.label.match(regex)) {\n          fixturesSearched++;\n          suggest.placeId = suggest.label;\n          suggest.isFixture = true;\n          suggests.push(suggest);\n        }\n      });\n      suggestsResults.forEach(function (suggest) {\n        if (!skipSuggest(suggest)) {\n          suggests.push({\n            label: _this3.props.getSuggestLabel(suggest),\n            placeId: suggest.place_id,\n            raw: suggest,\n            isFixture: false\n          });\n        }\n      });\n      activeSuggest = this.updateActiveSuggest(suggests);\n      this.props.onSuggestResults(suggests);\n      this.setState({\n        suggests: suggests,\n        activeSuggest: activeSuggest\n      }, callback);\n    }\n    /**\n     * Return the new activeSuggest object after suggests have been updated\n     * @param {Array} suggests The new list of suggests\n     * @return {Object} The new activeSuggest\n     **/\n\n  }, {\n    key: 'updateActiveSuggest',\n    value: function updateActiveSuggest() {\n      var suggests = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var activeSuggest = this.state.activeSuggest;\n\n      if (activeSuggest) {\n        var newSuggest = suggests.find(function (listedSuggest) {\n          return activeSuggest.placeId === listedSuggest.placeId && activeSuggest.isFixture === listedSuggest.isFixture;\n        });\n        activeSuggest = newSuggest || null;\n      }\n\n      return activeSuggest;\n    }\n    /**\n     * Show the suggestions\n     */\n\n  }, {\n    key: 'showSuggests',\n    value: function showSuggests() {\n      this.searchSuggests();\n      this.setState({\n        isSuggestsHidden: false\n      });\n    }\n    /**\n     * Hide the suggestions\n     */\n\n  }, {\n    key: 'activateSuggest',\n\n    /**\n     * Activate a new suggest\n     * @param {String} direction The direction in which to activate new suggest\n     */\n    value: function activateSuggest(direction) {\n      // eslint-disable-line complexity\n      if (this.state.isSuggestsHidden) {\n        this.showSuggests();\n        return;\n      }\n\n      var suggestsCount = this.state.suggests.length - 1,\n          next = direction === 'next';\n      var newActiveSuggest = null,\n          newIndex = 0,\n          i = 0;\n\n      for (i; i <= suggestsCount; i++) {\n        if (this.state.suggests[i] === this.state.activeSuggest) {\n          newIndex = next ? i + 1 : i - 1;\n        }\n      }\n\n      if (!this.state.activeSuggest) {\n        newIndex = next ? 0 : suggestsCount;\n      }\n\n      if (newIndex >= 0 && newIndex <= suggestsCount) {\n        newActiveSuggest = this.state.suggests[newIndex];\n      }\n\n      this.props.onActivateSuggest(newActiveSuggest);\n      this.setState({\n        activeSuggest: newActiveSuggest\n      });\n    }\n    /**\n     * When an item got selected\n     * @param {GeolookupItem} suggest The selected suggest item\n     */\n\n  }, {\n    key: 'geocodeSuggest',\n\n    /**\n     * Geocode a suggest\n     * @param  {Object} suggest The suggest\n     */\n    value: function geocodeSuggest(suggest) {\n      var _this4 = this;\n\n      if (typeof this.props.onGeocodeSuggest() === 'undefined') {\n        if (this.props.geocodeProvider) {\n          // use props defined geocodeProvider\n          this.props.geocodeProvider.geocode(suggest).then(function (geocodedResults) {\n            _this4.props.onSuggestSelect(geocodedResults);\n          });\n        } else {\n          // use default google geocode lib\n          this.geocoder.geocode(suggest.placeId && !suggest.isFixture ? {\n            placeId: suggest.placeId\n          } : {\n            address: suggest.label\n          }, function (results, status) {\n            if (status === _this4.googleMaps.GeocoderStatus.OK) {\n              var gmaps = results[0],\n                  location = gmaps.geometry.location;\n              suggest.gmaps = gmaps;\n              suggest.location = {\n                lat: location.lat(),\n                lng: location.lng()\n              };\n            }\n\n            _this4.props.onSuggestSelect(suggest);\n          });\n        }\n      } else {\n        // use props defined geocode function\n        var geocodedSuggest = this.props.onGeocodeSuggest(suggest);\n        this.props.onSuggestSelect(geocodedSuggest);\n      }\n    }\n    /**\n     * Render the view\n     * @return {Function} The React element to render\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var attributes = (0, _filterInputAttributes2.default)(this.props),\n          classes = (0, _classnames2.default)('geolookup', this.props.className, {\n        'geolookup--loading': this.state.isLoading\n      }),\n          shouldRenderLabel = this.props.label && attributes.id,\n          shouldRenderButton = this.props.disableAutoLookup,\n          input = _react2.default.createElement(_input2.default, _extends({\n        className: this.props.inputClassName,\n        ref: 'input',\n        value: this.state.userInput,\n        ignoreEnter: !this.state.isSuggestsHidden,\n        ignoreTab: this.props.ignoreTab,\n        style: this.props.style.input,\n        onChange: this.onInputChange,\n        onFocus: this.onInputFocus,\n        onBlur: this.onInputBlur,\n        onKeyPress: this.props.onKeyPress,\n        onNext: this.onNext,\n        onPrev: this.onPrev,\n        onSelect: this.onSelect,\n        onEscape: this.hideSuggests\n      }, attributes)),\n          button = _react2.default.createElement('button', {\n        className: this.props.buttonClassName,\n        type: 'button',\n        onClick: this.onButtonClick\n      }, this.props.buttonText),\n          suggestionsList = _react2.default.createElement(_suggestList2.default, {\n        isHidden: this.state.isSuggestsHidden,\n        style: this.props.style.suggests,\n        suggestItemStyle: this.props.style.suggestItem,\n        suggests: this.state.suggests,\n        hiddenClassName: this.props.suggestsHiddenClassName,\n        suggestItemActiveClassName: this.props.suggestItemActiveClassName,\n        activeSuggest: this.state.activeSuggest,\n        onSuggestNoResults: this.onSuggestNoResults,\n        onSuggestMouseDown: this.onSuggestMouseDown,\n        onSuggestMouseOut: this.onSuggestMouseOut,\n        onSuggestSelect: this.selectSuggest,\n        suggestItemLabelRenderer: this.props.suggestItemLabelRenderer\n      });\n\n      return _react2.default.createElement('div', {\n        className: classes\n      }, _react2.default.createElement('span', {\n        className: 'geolookup__input-wrapper'\n      }, shouldRenderLabel && _react2.default.createElement('label', {\n        className: 'geolookup__label',\n        htmlFor: attributes.id\n      }, this.props.label), input), shouldRenderButton && _react2.default.createElement('span', {\n        className: 'geolookup__button-wrapper'\n      }, button), _react2.default.createElement('div', {\n        className: 'geolookup__suggests-wrapper'\n      }, suggestionsList));\n    }\n  }]);\n\n  return Geolookup;\n}(_react2.default.Component);\n/**\n * Types for the properties\n * @type {Object}\n */\n\n\nGeolookup.propTypes = _propTypes2.default;\n/**\n * Default values for the properties\n * @type {Object}\n */\n\nGeolookup.defaultProps = _defaults2.default;\nexports.default = Geolookup;","map":{"version":3,"sources":["/Users/colthafer/client_side-main/node_modules/react-geolookup/dist/Geolookup.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_classnames","_classnames2","_lodash","_lodash2","_defaults","_defaults2","_propTypes","_propTypes2","_filterInputAttributes","_filterInputAttributes2","_input","_input2","_suggestList","_suggestList2","obj","__esModule","default","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","escapeRegExp","str","replace","Geolookup","_React$Component","_this","getPrototypeOf","onInputChange","userInput","setState","onAfterInputChange","state","isSuggestsHidden","disableAutoLookup","showSuggests","onChange","onInputFocus","onFocus","onInputBlur","ignoreBlur","hideSuggests","onButtonClick","onNext","activateSuggest","onPrev","onSelect","selectSuggest","activeSuggest","onSuggestMouseDown","onSuggestMouseOut","onSuggestNoResults","onBlur","timer","setTimeout","suggest","label","location","onSuggestSelect","geocodeSuggest","isLoading","initialValue","suggests","bind","queryDelay","geocodeProvider","componentWillReceiveProps","componentWillMount","window","onGeocodeSuggest","googleMaps","google","maps","autocompleteService","places","AutocompleteService","geocoder","Geocoder","componentWillUnmount","clearTimeout","focus","refs","input","blur","update","clear","searchSuggests","_this2","updateSuggests","onSuggestsLookup","lookup","then","suggestsResults","autoActivateFirstSuggest","catch","error","console","options","forEach","option","country","componentRestrictions","getPlacePredictions","_this3","undefined","callback","regex","RegExp","skipSuggest","maxFixtures","fixturesSearched","fixtures","match","placeId","isFixture","push","getSuggestLabel","place_id","raw","updateActiveSuggest","onSuggestResults","newSuggest","find","listedSuggest","direction","suggestsCount","next","newActiveSuggest","newIndex","onActivateSuggest","_this4","geocode","geocodedResults","address","results","status","GeocoderStatus","OK","gmaps","geometry","lat","lng","geocodedSuggest","render","attributes","classes","className","shouldRenderLabel","id","shouldRenderButton","createElement","inputClassName","ref","ignoreEnter","ignoreTab","style","onKeyPress","onEscape","button","buttonClassName","type","onClick","buttonText","suggestionsList","isHidden","suggestItemStyle","suggestItem","hiddenClassName","suggestsHiddenClassName","suggestItemActiveClassName","suggestItemLabelRenderer","htmlFor","Component","propTypes","defaultProps"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _classnames = require('classnames');\n\nvar _classnames2 = _interopRequireDefault(_classnames);\n\nvar _lodash = require('lodash.debounce');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _defaults = require('./defaults');\n\nvar _defaults2 = _interopRequireDefault(_defaults);\n\nvar _propTypes = require('./prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _filterInputAttributes = require('./filter-input-attributes');\n\nvar _filterInputAttributes2 = _interopRequireDefault(_filterInputAttributes);\n\nvar _input = require('./input');\n\nvar _input2 = _interopRequireDefault(_input);\n\nvar _suggestList = require('./suggest-list');\n\nvar _suggestList2 = _interopRequireDefault(_suggestList);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* global window */\n\n// Escapes special characters in user input for regex\nfunction escapeRegExp(str) {\n  return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n}\n\n/**\n * Entry point for the Geolookup component\n */\n\nvar Geolookup = function (_React$Component) {\n  _inherits(Geolookup, _React$Component);\n\n  /**\n   * The constructor. Sets the initial state.\n   * @param  {Object} props The properties object.\n   */\n  function Geolookup(props) {\n    _classCallCheck(this, Geolookup);\n\n    var _this = _possibleConstructorReturn(this, (Geolookup.__proto__ || Object.getPrototypeOf(Geolookup)).call(this, props));\n\n    _this.onInputChange = function (userInput) {\n      _this.setState({ userInput: userInput }, _this.onAfterInputChange);\n    };\n\n    _this.onAfterInputChange = function () {\n      if (!_this.state.isSuggestsHidden && !_this.disableAutoLookup) {\n        _this.showSuggests();\n      }\n      _this.props.onChange(_this.state.userInput);\n    };\n\n    _this.onInputFocus = function () {\n      _this.props.onFocus();\n      if (!_this.disableAutoLookup) {\n        _this.showSuggests();\n      }\n    };\n\n    _this.onInputBlur = function () {\n      if (!_this.state.ignoreBlur && !_this.disableAutoLookup) {\n        _this.hideSuggests();\n      }\n    };\n\n    _this.onButtonClick = function () {\n      if (_this.state.isSuggestsHidden && _this.disableAutoLookup) {\n        _this.showSuggests();\n      } else {\n        _this.hideSuggests();\n      }\n    };\n\n    _this.onNext = function () {\n      return _this.activateSuggest('next');\n    };\n\n    _this.onPrev = function () {\n      return _this.activateSuggest('prev');\n    };\n\n    _this.onSelect = function () {\n      return _this.selectSuggest(_this.state.activeSuggest);\n    };\n\n    _this.onSuggestMouseDown = function () {\n      return _this.setState({ ignoreBlur: true });\n    };\n\n    _this.onSuggestMouseOut = function () {\n      return _this.setState({ ignoreBlur: false });\n    };\n\n    _this.onSuggestNoResults = function () {\n      _this.props.onSuggestNoResults(_this.state.userInput);\n    };\n\n    _this.hideSuggests = function () {\n      _this.props.onBlur(_this.state.userInput);\n      _this.timer = setTimeout(function () {\n        _this.setState({\n          isSuggestsHidden: true,\n          activeSuggest: null\n        });\n      }, 100);\n    };\n\n    _this.selectSuggest = function (suggest) {\n      if (!suggest) {\n        suggest = {\n          label: _this.state.userInput\n        };\n      }\n\n      _this.setState({\n        isSuggestsHidden: true,\n        userInput: suggest.label\n      });\n\n      if (suggest.location) {\n        _this.setState({ ignoreBlur: false });\n        _this.props.onSuggestSelect(suggest);\n        return;\n      }\n\n      _this.geocodeSuggest(suggest);\n    };\n\n    _this.state = {\n      isSuggestsHidden: true,\n      isLoading: false,\n      userInput: props.initialValue,\n      activeSuggest: null,\n      suggests: []\n    };\n\n    _this.onInputChange = _this.onInputChange.bind(_this);\n    _this.onAfterInputChange = _this.onAfterInputChange.bind(_this);\n\n    if (props.queryDelay) {\n      _this.onAfterInputChange = (0, _lodash2.default)(_this.onAfterInputChange, props.queryDelay);\n    }\n\n    _this.geocodeProvider = props.geocodeProvider;\n    _this.disableAutoLookup = props.disableAutoLookup;\n    return _this;\n  }\n\n  /**\n   * Change inputValue if prop changes\n   * @param {Object} props The new props\n   */\n\n\n  _createClass(Geolookup, [{\n    key: 'componentWillReceiveProps',\n    value: function componentWillReceiveProps(props) {\n      if (this.props.initialValue !== props.initialValue) {\n        this.setState({ userInput: props.initialValue });\n      }\n    }\n\n    /**\n     * Called on the client side after component is mounted.\n     * Google api sdk object will be obtained and cached as a instance property.\n     * Necessary objects of google api will also be determined and saved.\n     */\n\n  }, {\n    key: 'componentWillMount',\n    value: function componentWillMount() {\n      if (typeof window === 'undefined') {\n        return;\n      }\n\n      // if no geocodeProvider and no onGeocodeSugegst function is\n      // set, use google apis\n      if (!this.geocodeProvider && typeof this.props.onGeocodeSuggest() === 'undefined') {\n        // use google apis\n        var googleMaps = this.props.googleMaps || window.google && // eslint-disable-line no-extra-parens\n        window.google.maps || this.googleMaps;\n        this.googleMaps = googleMaps;\n        /* istanbul ignore next */\n        if (!googleMaps) {\n          return;\n        }\n        this.autocompleteService = new googleMaps.places.AutocompleteService();\n        this.geocoder = new googleMaps.Geocoder();\n      }\n    }\n\n    /**\n     * When the component will unmount\n     */\n\n  }, {\n    key: 'componentWillUnmount',\n    value: function componentWillUnmount() {\n      clearTimeout(this.timer);\n    }\n\n    /**\n     * When the input changed\n     * @param {String} userInput The input value of the user\n     */\n\n\n    /**\n     * On After the input got changed\n     */\n\n\n    /**\n     * When the input gets focused\n     */\n\n\n    /**\n     * When the input gets blurred\n     */\n\n\n    /**\n     * When the search button gets clicked\n     */\n\n  }, {\n    key: 'focus',\n\n\n    /**\n     * Focus the input\n     */\n    value: function focus() {\n      this.refs.input.focus();\n    }\n\n    /**\n     * Blur the input\n     */\n\n  }, {\n    key: 'blur',\n    value: function blur() {\n      this.refs.input.blur();\n    }\n\n    /**\n     * Update the value of the user input\n     * @param {String} userInput the new value of the user input\n     */\n\n  }, {\n    key: 'update',\n    value: function update(userInput) {\n      this.setState({ userInput: userInput });\n      this.props.onChange(userInput);\n    }\n\n    /*\n     * Clear the input and close the suggestion pane\n     */\n\n  }, {\n    key: 'clear',\n    value: function clear() {\n      this.setState({ userInput: '' }, this.hideSuggests);\n    }\n\n    /**\n     * Search for new suggests\n     */\n\n  }, {\n    key: 'searchSuggests',\n    value: function searchSuggests() {\n      var _this2 = this;\n\n      if (!this.state.userInput) {\n        this.updateSuggests();\n        return;\n      }\n\n      this.setState({ isLoading: true }, function () {\n        if (typeof _this2.props.onSuggestsLookup() === 'undefined') {\n          if (_this2.props.geocodeProvider) {\n            // Use props defined geocodeProvider.lookup\n            _this2.props.geocodeProvider.lookup(_this2.state.userInput).then(function (suggestsResults) {\n              _this2.setState({ isLoading: false });\n              _this2.updateSuggests(suggestsResults || [], // can be null\n              function () {\n                if (_this2.props.autoActivateFirstSuggest && !_this2.state.activeSuggest) {\n                  _this2.activateSuggest('next');\n                }\n              });\n            }).catch(function (error) {\n              console.error('geocodeProvider lookup Error: ', error);\n            });\n          } else {\n            // Use Google Places lookup\n            var options = {\n              input: _this2.state.userInput\n            };\n\n            ['location', 'radius', 'bounds', 'types'].forEach(function (option) {\n              if (_this2.props[option]) {\n                options[option] = _this2.props[option];\n              }\n            });\n\n            if (_this2.props.country) {\n              options.componentRestrictions = {\n                country: _this2.props.country\n              };\n            }\n            _this2.autocompleteService.getPlacePredictions(options, function (suggestsResults) {\n              _this2.setState({ isLoading: false });\n              _this2.updateSuggests(suggestsResults || [], // can be null\n              function () {\n                if (_this2.props.autoActivateFirstSuggest && !_this2.state.activeSuggest) {\n                  _this2.activateSuggest('next');\n                }\n              });\n            });\n          }\n        } else {\n          // Use props defined onSuggestLookup\n          _this2.props.onSuggestsLookup(_this2.state.userInput).then(function (suggestsResults) {\n            _this2.setState({ isLoading: false });\n            _this2.updateSuggests(suggestsResults || [], // can be null\n            function () {\n              if (_this2.props.autoActivateFirstSuggest && !_this2.state.activeSuggest) {\n                _this2.activateSuggest('next');\n              }\n            });\n          }).catch(function (error) {\n            console.error('onSuggestsLookup Search Error: ', error);\n          });\n        }\n      });\n    }\n\n    /**\n     * Update the suggests\n     * @param {Array} suggestsResults The new google suggests\n     * @param {Function} callback Called once the state has been updated\n     */\n\n  }, {\n    key: 'updateSuggests',\n    value: function updateSuggests() {\n      var _this3 = this;\n\n      var suggestsResults = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var callback = arguments[1];\n\n      var suggests = [],\n          regex = new RegExp(escapeRegExp(this.state.userInput), 'gim'),\n          skipSuggest = this.props.skipSuggest,\n          maxFixtures = 10,\n          fixturesSearched = 0,\n          activeSuggest = null;\n\n      this.props.fixtures.forEach(function (suggest) {\n        if (fixturesSearched >= maxFixtures) {\n          return;\n        }\n\n        if (!skipSuggest(suggest) && suggest.label.match(regex)) {\n          fixturesSearched++;\n\n          suggest.placeId = suggest.label;\n          suggest.isFixture = true;\n          suggests.push(suggest);\n        }\n      });\n\n      suggestsResults.forEach(function (suggest) {\n        if (!skipSuggest(suggest)) {\n          suggests.push({\n            label: _this3.props.getSuggestLabel(suggest),\n            placeId: suggest.place_id,\n            raw: suggest,\n            isFixture: false\n          });\n        }\n      });\n\n      activeSuggest = this.updateActiveSuggest(suggests);\n      this.props.onSuggestResults(suggests);\n      this.setState({ suggests: suggests, activeSuggest: activeSuggest }, callback);\n    }\n\n    /**\n     * Return the new activeSuggest object after suggests have been updated\n     * @param {Array} suggests The new list of suggests\n     * @return {Object} The new activeSuggest\n     **/\n\n  }, {\n    key: 'updateActiveSuggest',\n    value: function updateActiveSuggest() {\n      var suggests = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n\n      var activeSuggest = this.state.activeSuggest;\n\n      if (activeSuggest) {\n        var newSuggest = suggests.find(function (listedSuggest) {\n          return activeSuggest.placeId === listedSuggest.placeId && activeSuggest.isFixture === listedSuggest.isFixture;\n        });\n\n        activeSuggest = newSuggest || null;\n      }\n\n      return activeSuggest;\n    }\n\n    /**\n     * Show the suggestions\n     */\n\n  }, {\n    key: 'showSuggests',\n    value: function showSuggests() {\n      this.searchSuggests();\n      this.setState({ isSuggestsHidden: false });\n    }\n\n    /**\n     * Hide the suggestions\n     */\n\n  }, {\n    key: 'activateSuggest',\n\n\n    /**\n     * Activate a new suggest\n     * @param {String} direction The direction in which to activate new suggest\n     */\n    value: function activateSuggest(direction) {\n      // eslint-disable-line complexity\n      if (this.state.isSuggestsHidden) {\n        this.showSuggests();\n        return;\n      }\n\n      var suggestsCount = this.state.suggests.length - 1,\n          next = direction === 'next';\n      var newActiveSuggest = null,\n          newIndex = 0,\n          i = 0;\n\n      for (i; i <= suggestsCount; i++) {\n        if (this.state.suggests[i] === this.state.activeSuggest) {\n          newIndex = next ? i + 1 : i - 1;\n        }\n      }\n\n      if (!this.state.activeSuggest) {\n        newIndex = next ? 0 : suggestsCount;\n      }\n\n      if (newIndex >= 0 && newIndex <= suggestsCount) {\n        newActiveSuggest = this.state.suggests[newIndex];\n      }\n\n      this.props.onActivateSuggest(newActiveSuggest);\n\n      this.setState({ activeSuggest: newActiveSuggest });\n    }\n\n    /**\n     * When an item got selected\n     * @param {GeolookupItem} suggest The selected suggest item\n     */\n\n  }, {\n    key: 'geocodeSuggest',\n\n\n    /**\n     * Geocode a suggest\n     * @param  {Object} suggest The suggest\n     */\n    value: function geocodeSuggest(suggest) {\n      var _this4 = this;\n\n      if (typeof this.props.onGeocodeSuggest() === 'undefined') {\n        if (this.props.geocodeProvider) {\n          // use props defined geocodeProvider\n          this.props.geocodeProvider.geocode(suggest).then(function (geocodedResults) {\n            _this4.props.onSuggestSelect(geocodedResults);\n          });\n        } else {\n          // use default google geocode lib\n          this.geocoder.geocode(suggest.placeId && !suggest.isFixture ? { placeId: suggest.placeId } : { address: suggest.label }, function (results, status) {\n            if (status === _this4.googleMaps.GeocoderStatus.OK) {\n              var gmaps = results[0],\n                  location = gmaps.geometry.location;\n\n              suggest.gmaps = gmaps;\n              suggest.location = {\n                lat: location.lat(),\n                lng: location.lng()\n              };\n            }\n            _this4.props.onSuggestSelect(suggest);\n          });\n        }\n      } else {\n        // use props defined geocode function\n        var geocodedSuggest = this.props.onGeocodeSuggest(suggest);\n        this.props.onSuggestSelect(geocodedSuggest);\n      }\n    }\n\n    /**\n     * Render the view\n     * @return {Function} The React element to render\n     */\n\n  }, {\n    key: 'render',\n    value: function render() {\n      var attributes = (0, _filterInputAttributes2.default)(this.props),\n          classes = (0, _classnames2.default)('geolookup', this.props.className, { 'geolookup--loading': this.state.isLoading }),\n          shouldRenderLabel = this.props.label && attributes.id,\n          shouldRenderButton = this.props.disableAutoLookup,\n          input = _react2.default.createElement(_input2.default, _extends({ className: this.props.inputClassName,\n        ref: 'input',\n        value: this.state.userInput,\n        ignoreEnter: !this.state.isSuggestsHidden,\n        ignoreTab: this.props.ignoreTab,\n        style: this.props.style.input,\n        onChange: this.onInputChange,\n        onFocus: this.onInputFocus,\n        onBlur: this.onInputBlur,\n        onKeyPress: this.props.onKeyPress,\n        onNext: this.onNext,\n        onPrev: this.onPrev,\n        onSelect: this.onSelect,\n        onEscape: this.hideSuggests }, attributes)),\n          button = _react2.default.createElement(\n        'button',\n        { className: this.props.buttonClassName,\n          type: 'button',\n          onClick: this.onButtonClick },\n        this.props.buttonText\n      ),\n          suggestionsList = _react2.default.createElement(_suggestList2.default, { isHidden: this.state.isSuggestsHidden,\n        style: this.props.style.suggests,\n        suggestItemStyle: this.props.style.suggestItem,\n        suggests: this.state.suggests,\n        hiddenClassName: this.props.suggestsHiddenClassName,\n        suggestItemActiveClassName: this.props.suggestItemActiveClassName,\n        activeSuggest: this.state.activeSuggest,\n        onSuggestNoResults: this.onSuggestNoResults,\n        onSuggestMouseDown: this.onSuggestMouseDown,\n        onSuggestMouseOut: this.onSuggestMouseOut,\n        onSuggestSelect: this.selectSuggest,\n        suggestItemLabelRenderer: this.props.suggestItemLabelRenderer });\n\n      return _react2.default.createElement(\n        'div',\n        { className: classes },\n        _react2.default.createElement(\n          'span',\n          { className: 'geolookup__input-wrapper' },\n          shouldRenderLabel && _react2.default.createElement(\n            'label',\n            { className: 'geolookup__label',\n              htmlFor: attributes.id },\n            this.props.label\n          ),\n          input\n        ),\n        shouldRenderButton && _react2.default.createElement(\n          'span',\n          { className: 'geolookup__button-wrapper' },\n          button\n        ),\n        _react2.default.createElement(\n          'div',\n          { className: 'geolookup__suggests-wrapper' },\n          suggestionsList\n        )\n      );\n    }\n  }]);\n\n  return Geolookup;\n}(_react2.default.Component);\n\n/**\n * Types for the properties\n * @type {Object}\n */\n\n\nGeolookup.propTypes = _propTypes2.default;\n\n/**\n * Default values for the properties\n * @type {Object}\n */\nGeolookup.defaultProps = _defaults2.default;\n\nexports.default = Geolookup;"]},"metadata":{},"sourceType":"script"}